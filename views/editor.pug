doctype html
html
    head
        title= title
        link(rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.1/css/bulma.min.css')
        link(rel='stylesheet' href='//keystone.forgegraphics.com/styles/main.css')
        link(rel='stylesheet' href='/styles/editor.css')

        if versionnum
            script.
                var currentVersion = #{versionnum} ;
        if draftversionnum
            script.
                var draftVersion = #{draftversionnum} ;


    body.editor
        div.columns
            div.column.is-8
                h2.title.is-2= title
                h3.sub-title.is-3= message

        div.editor-page-container.container.is-widescreen
            div.columns
                div.policy-list.column.is-3
                    div.field
                        label.label(for='policysearch') Search:
                        div.control.has-icons-right
                            input(type='text' class="input" name='policysearch' placeholder='(Policy Number)')
                            span.icon.is-small.is-right
                                i.fas.fa-search
                    h4 Undrafted Policy List
                    ul


                div.editor-form.column.is-9
                    form(id='policy-form' method='POST' action='/editor-test')

                        div.columns
                            div.field.column.is-10
                                label.label(for='policytitle') Policy Title:
                                div.control.has-icons-right
                                    input(type='text' class="input" name='policytitle' value=policytitle)
                                    span.icon.is-small.is-right
                                        i.fas.fa-check
                            div.field.column.is-2
                                label.label(for='policynumber') Policy Number:
                                div.control.has-icons-right
                                    input(type='text' class="input" name='policynumber' value=policynumber)
                                    span.icon.is-small.is-right
                                        i.fas.fa-check
                        div.editor-container.panel
                            textarea( id='editor1' style='display:none' rows='10' cols='80' name='editorcontent')=editorcontent

                        div.columns
                            div.field.is-horizontal.column.is-10.is-offset-1
                                div.field-label.is-normal
                                    label.label(for='note') Version Notes:
                                div.field-body
                                    div.field
                                        div.control.has-icons-left
                                            input(type='text' class="input" name='note' value=note)
                                            span.icon.is-left
                                                i.fas.fa-check

                        div.columns
                            div.field.is-horizontal.column.is-10.is-offset-1
                                div.field-label.is-normal
                                    label.label(for='note') Versions:
                                div.field-body
                                    div.field
                                        div.control
                                            div.version-list.select.is-info.is-fullwidth
                                                select
                                                    each content, index in contentversionarr
                                                        -var date = content.versiondate
                                                        if index == versionnum
                                                            option.draft(value=index)= date + ' - ' + content.note + '(Draft)'
                                                        if index == draftversionnum
                                                            option.final(value=index)= date + ' - ' + content.note + '(Final)'
                                                        if index != versionnum && index != draftversionnum
                                                            option(value=index)= date + ' - ' + content.note

                        div.field.is-grouped.is-grouped-right
                            input(type='hidden' name='currentversion' value=currentversion)

                            div.control.plist-button
                                button.button.is-outlined.plist-btn(type='button')
                                    span.icon.is-small
                                        i.fas.fa-angle-double-left
                                    span Policy List

                            div.control.view-draft-button
                                button.button.is-warning.is-outlined.view-draft-btn.is-hidden(type='button')
                                    span.icon.is-small
                                        i.fas.fa-check
                                    span View Draft Policy

                            div.control.view-button
                                button.button.is-info.is-outlined.view-final-btn.is-hidden(type='button')
                                    span.icon.is-small
                                        i.fas.fa-check
                                    span View Final Policy

                            div.control.new-button
                                button.button.is-info.is-outlined.new-btn(type='button')
                                    span.icon.is-small
                                        i.fas.fa-file-alt
                                    span Create New Policy




                        div.field.is-grouped.is-grouped-right
                            div.control.cancel-button
                                button.button.is-danger.cancel-btn(type='button')
                                    span.icon.is-small
                                        i.fas.fa-times
                                    span Cancel Edits

                            div.control.draft-button
                                button.button.is-warning.draft-btn(type='button')
                                    span.icon.is-small
                                        i.fas.fa-file-alt
                                    span Publish To Draft
                            div.control.publish-button
                                button.button.is-link.pub-btn(type='button')
                                    span.icon.is-small
                                        i.fas.fa-file-alt
                                    span Publish To Final
                            div.control.save-button
                                button.button.is-success.save-btn(disabled='' type='button')
                                    span.icon.is-small
                                        i.fas.fa-check
                                    span Save Policy



            div.preview.card
                header.card-header
                    p.card-header-title Policy Edit Preview
                div.card-content
                    div.content

        footer.footer
            div.container
                div.content.has-text-centered
                    p Proprietary Information of Blue Cross and Blue Shield of Alabama

        script(type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js')
        script(type='text/javascript' src='/scripts/ckeditor/ckeditor.js')
        script(type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/gsap/2.0.1/TweenMax.min.js')
        script(type='text/javascript' src='/scripts/editor.js')
        script(type='text/javascript' src='https://use.fontawesome.com/releases/v5.0.7/js/all.js')
